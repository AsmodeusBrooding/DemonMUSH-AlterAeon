<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE muclient>
<!-- Saved on Wednesday, January 02, 2019, 11:29 PM -->
<!-- MuClient version 5.06-pre -->

<!-- Plugin "Aeon_Demon_Talk" generated by Plugin Wizard -->
<!-- Designed by Demon for Alter Aeon to catch channel sends and send them to the Chat Window -->

<muclient>
<plugin
   name="DemonMUSH_CommCatcher"
   id="84164fd114202591729cb50c"
   language="Lua"
   purpose="move messages from main window to comm log"
   save_state="y"
   date_written="2019-01-02 23:28:32"
   requires="5.06"
   version="1.0"
   >

</plugin>


<!--  Get our standard constants -->

<include name="constants.lua"/>

<!--  Variables  -->

<variables>
    <variable name="tells_tab">1</variable>
    <variable name="auction_tab">1</variable>
    <variable name="clantell_tab">1</variable>
    <variable name="grouptell_tab">1</variable>
    <variable name="regularchan_tab">1</variable>
    <variable name="circlechan_tab">1</variable>
    <variable name="friends_tab">1</variable>
    <variable name="says_tab">1</variable>
    <variable name="notifies_tab">1</variable>
    <variable name="replay_tab">1</variable>
</variables>

<!--  Aliases  -->

<aliases>
<alias
	name="comm_checker"
	sequence="100"
	match="commcheck"
	enabled="y"
	send_to="12"
	ignore_case="y"><send>commcheck()
</send></alias>
<alias
	sequence="100"
	match="chat check"
	enabled="y"
	send_to="12"
	ignore_case="y"><send>commcheck()
</send></alias>
<alias
	sequence="100"
	match="chat help"
	enabled="y"
	send_to="12"
	ignore_case="y"><send>chathelp()
</send></alias>
<alias enabled="y"
    name="tell_settab"
    sequence="100"
    match="set tells tab *"
    send_to="9"
    variable="tells_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="grouptell_settab"
    sequence="100"
    match="set grouptell tab *"
    send_to="9"
    variable="grouptell_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="auction_settab"
    sequence="100"
    match="set auction tab *"
    send_to="9"
    variable="auction_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="clantell_settab"
    sequence="100"
    match="set clantell tab *"
    send_to="9"
    variable="clantell_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="says_settab"
    sequence="100"
    match="set says tab *"
    send_to="9"
    variable="says_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="regularchan_settab"
    sequence="100"
    match="set regularchan tab *"
    send_to="9"
    variable="regularchan_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="circlechan_settab"
    sequence="100"
    match="set circlechan tab *"
    send_to="9"
    variable="circlechan_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="friends_settab"
    sequence="100"
    match="set friends tab *"
    send_to="9"
    variable="friends_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>
<alias enabled="y"
    name="notifies_settab"
    sequence="100"
    match="set notifies tab *"
    send_to="9"
    variable="notifies_tab"
    regexp="n"
    ignore_case="y"><send>%1</send></alias>


<alias
    enabled="y"
    sequence="100"
    match="replay *"
    send_to="12"
    regexp="n"
    ignore_case="n">
<send>Execute ("repla %1 -t | prefix ~R~H[~YReplay~R] ~O")</send>
</alias>
<alias
    enabled="y"
    sequence="100"
    match="replay"
    send_to="12"
    regexp="n"
    ignore_case="n">
<send>Execute ("repla -t | prefix ~R~H[~YReplay~R] ~O")</send>
</alias>


</aliases>

<!--  Triggers  -->

<triggers>
<trigger
   enabled="y"
   name="friends"
   match="(friend) * posted: *"
   script="friends"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="friendsevent"
   match="(friend) * *!"
   script="friends"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="friendsquest"
   match="(friend) * *."
   script="friends"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   match="Dentin tells you, 'version'"
   omit_from_output="y"
   regexp="n"
   send_to="14"
   sequence="100"
  >
  </trigger>
<trigger
   enabled="y"
   match="Soth tells you, 'version'"
   omit_from_output="y"
   regexp="n"
   send_to="14"
   sequence="100"
  >
  </trigger>
<trigger
   enabled="y"
   match="A terrible winged Demon tells you, 'version'"
   omit_from_output="y"
   regexp="n"
   send_to="14"
   sequence="100"
  >
  </trigger>
<trigger
   enabled="y"
   match="[*] You reply to *, 'DemonMUSH *'"
   omit_from_output="y"
   omit_from_log="y"
   regexp="n"
   send_to="14"
   sequence="100"
  >
  </trigger>
<trigger
   enabled="y"
   name="friendslog"
   match="(friend) * has * the game."
   script="friends"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="replay"
   match="[Replay] (* * ago) *"
   script="replay"
   sequence="100"
   omit_from_output="n">
</trigger>

<trigger
   enabled="y"
   name="get_tell"
   match="^(A terrible winged Demon|Rubedo Souless|^\w+) tells you, '.*'$"
   regexp="y"
   script="tells"
   keep_evaluating="y"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="send_tell"
   match="You tell (A terrible winged Demon|.*), '.*'"
   regexp="y"
   script="tells"
   keep_evaluating="y"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="get_reply"
   match="^(A terrible winged Demon|Rubedo Souless|^\w+) * replies to you, '.*'$"
   regexp="y"
   script="tells"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="send_clan"
   match="You tell the clan, '*'"
   script="clantell"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="get_clan"
   match="* tells the clan, '*'"
   script="clantell"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="get_elder"
   match="* tells the elders, '*'"
   script="clantell"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="send_elder"
   match="You tell the elders, '*'"
   script="clantell"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="get_grouptell"
   match="* tells the group, '*'"
   script="grouptell"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="send_grouptell"
   match="You tell the group, '*'"
   script="grouptell"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="send_reply"
   match="You reply to *, '*'"
   script="tells"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="get_auction"
   match="* auctions, '*'"
   script="auction"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="send_auction"
   match="You auction, '*'"
   script="auction"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="send_says"
   match="You say, '*'"
   script="says"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
   enabled="y"
   name="get_says"
   match="^(A terrible winged Demon|Rubedo Souless|^\w+) says, '.*'$"
   script="says"
   regexp="y"
   sequence="100"
   omit_from_output="n">
</trigger>
<trigger
    enabled="y"
	name="regularchan"
    match="\[([a-zA-Z]+)\] ([a-zA-Z ]+)\: (.+)$"
    script="regularchan"
    regexp="y"
    omit_from_output="n"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="[]* *s, '*'"
    script="regularchan"
    regexp="n"
    omit_from_output="n"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="[]You *, '*'"
    script="regularchan"
    regexp="n"
    omit_from_output="n"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="[]* *: *"
    script="regularchan"
    regexp="n"
    omit_from_output="n"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="xaud[demonauc] *: *"
    script="regularchan"
    regexp="n"
    omit_from_output="y"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="Double mob experience is now enabled!"
    script="notifies"
    regexp="n"
    omit_from_output="n"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="(notify) * * (freak *!)"
    script="notifies"
    regexp="n"
    omit_from_output="n"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="(notify) * *, freak *!"
    script="notifies"
    regexp="n"
    omit_from_output="n"
    sequence="100">
</trigger>
<trigger
    enabled="y"
    match="Double experience caps for mob kills are now enabled!"
    script="notifies"
    regexp="n"
    omit_from_output="n"
    sequence="100">
</trigger>

</triggers>

<!--  Script  -->

<script>
<![CDATA[
-----------------------------------------------------------------------------------------------------
--    <variable name="tells_tab">1</variable>
--    <variable name="auction_tab">1</variable>
--    <variable name="clantell_tab">1</variable>
--    <variable name="grouptell_tab">1</variable>
--    <variable name="regularchan_tab">1</variable>
--    <variable name="circlechan_tab">1</variable>
--    <variable name="notifies_tab">1</variable>
--    <variable name="replay_tab">1</variable>
-----------------------------------------------------------------------------------------------------

require "utility"
dofile(GetPluginInfo(GetPluginID(), 20) .. "plugin_colors.lua")

function tells (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("tells_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. StylesToColours(styles), tab)
end -- untagged info

function friends (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("friends_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. StylesToColours(styles), tab)
end -- untagged info

function clantell (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("clantell_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. StylesToColours(styles), tab)
end -- untagged info

function grouptell (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("grouptell_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. StylesToColours(styles), tab)
end -- untagged info

function auction (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("auction_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. StylesToColours(styles), tab)
end -- untagged info

function regularchan (name, line, wildcards, styles)
noprefix = string.gsub(StylesToColours(styles), "{R%[%]", "")
    -- print ("name = " .. name)
    tab = GetVariable("regularchan_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. noprefix, tab)
end -- untagged info

function circlechan (name, line, wildcards, styles)
  noprefix = string.gsub(StylesToColours(styles), "{R%[%]", "")
      -- print ("name = " .. name)
      tab = GetVariable("regularchan_tab") or "1"
     a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. noprefix, tab)
end -- untagged info

function says (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("says_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. StylesToColours(styles), tab)
end -- untagged info

function notifies (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("notifies_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "[" .. os.date("%b %d, %H:%M:%S") .. "] " .. StylesToColours(styles), tab)
end -- untagged info
function replay (name, line, wildcards, styles)
    -- print ("name = " .. name)
    tab = GetVariable("replay_tab") or "1"
   a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", "@R[@Y" .. os.date("%b %d, %H:%M:%S") .. "@R] " .. StylesToColours(styles), tab)
   -- a, b = CallPlugin("b555825a4a5700c35fa80780", "storeFromOutside", StylesToColours(styles), tab) -- this is for NO TIMESTAMPS
end -- untagged info

function commcheck()
      util.print("{W--------------------------------------------------------------------------------")
      util.print("            {YD{ye{Ym{yo{Yn{RM{rU{RS{rH {x238Chat Window {YTab Information                            ")
      util.print("{W--------------------------------------------------------------------------------")
     -- util.print("{W The following is a list of the channels and which tab they're set to ")
     --util.print("")
      util.print("{Y            Channel List      {R-->          {Y Tab Number   {YVisible in Main Output")
      util.print("{W--------------------------------------------------------------------------------")
      util.print("")
      util.print("{Y            GroupTell         {R-->           {Y" .. (GetVariable("grouptell_tab") or 1) .."            " .. (GetVariable("grouptell_visible") or "Yes"))
      util.print("{Y            Discord           {R-->           {Y" .. (GetVariable("discord_tab") or 1) .."            " .. (GetVariable("discord_visible") or "Yes"))
      util.print("{Y            Music             {R-->           {Y" .. (GetVariable("music_tab") or 1) .."            " .. (GetVariable("music_visible") or "Yes"))
      util.print("{Y            Shout             {R-->           {Y" .. (GetVariable("shout_tab") or 1) .."            " .. (GetVariable("shout_visible") or "Yes"))
      util.print("{Y            Tells             {R-->           {Y" .. (GetVariable("tells_tab") or 1) .."            " .. (GetVariable("tells_visible") or "Yes"))
      util.print("{Y            Says              {R-->           {Y" .. (GetVariable("says_tab") or 1) .."            " .. (GetVariable("says_visible") or "Yes"))
      util.print("{Y            Clan              {R-->           {Y" .. (GetVariable("clan_tab") or 1) .."            " .. (GetVariable("clan_visible") or "Yes"))
      util.print("")
      util.print("{G Use set <channel> tab <tab number> to assign a channel to a different tab")
      util.print("{G        {GI.E. {Rset tells tab 2{G to set the tells channel to tab 2  ")
      util.print("")
      util.print("{W--------------------------------------------------------------------------------")
      util.print("")
end

function chathelp()
      util.print("{W--------------------------------------------------------------------------------")
      util.print("                 {YD{ye{Ym{yo{Yn{RM{rU{RS{rH {x238Chat Window {YHelp                            ")
      util.print("{W--------------------------------------------------------------------------------")
      util.print("")
      util.print("{Y chat help                 {R-->{W Displays the help pages for the chat window")
      util.print("{Y mute <channel>            {R-->{W Mutes a specific channel from the main output")
      util.print("{Y mute all                  {R-->{W Mutes all channels from the main output")
      util.print("{Y chat check                {R-->{W Displays information about channels, which tabs")
	  util.print("{Y                              {W the channels are assigned to, and if the channels")
	  util.print("{Y                              {W are visible in the main output window")
      util.print("{Y set <channel> <tabnumber> {R-->{W Assigns a channel to the specified tab number")
      util.print("")
      util.print("{W--------------------------------------------------------------------------------")
      util.print("")
      util.print("")
end


]]>
</script>
</muclient>
